<div class="d-flex gap-3 vh-100 p-3">
  <div class="h-100 w-75">
    <div class="d-flex flex-column h-100 gap-3">
      <div class="row">
        <div class="col">
          <div
            class="box bg-success text-white"
            (click)="filterAppointmentByType(1)"
          >
            <h4>{{ getDocumentTypeNumber(1) }}</h4>
            <h6>Voters Certificate</h6>
          </div>
        </div>
        <div class="col">
          <div
            class="box bg-primary text-white"
            (click)="filterAppointmentByType(2)"
          >
            <h4>{{ getDocumentTypeNumber(2) }}</h4>
            <h6>PSA</h6>
          </div>
        </div>
        <div class="col">
          <div
            class="box bg-warning text-white"
            (click)="filterAppointmentByType(4)"
          >
            <h4>{{ getDocumentTypeNumber(4) }}</h4>
            <h6>Burial Assistant</h6>
          </div>
        </div>
        <div class="col">
          <div
            class="box bg-danger text-white"
            (click)="filterAppointmentByType(3)"
          >
            <h4>{{ getDocumentTypeNumber(3) }}</h4>
            <h6>Kasalang bayan</h6>
          </div>
          <br />
          <br />
          <br />
        </div>

        <div class="container">
          <div class="row height d-flex justify-content-left align-items-left">
            <div class="col-md-4">
              <div class="input-group">
                <div class="input-group-btn search-panel"></div>
                <input
                  type="hidden"
                  name="search_param"
                  value="all"
                  id="search_param"
                />
                <input
                  type="text"
                  class="form-control"
                  name="x"
                  (keyup)="onSearch($event)"
                  placeholder="Type Search"
                />

                <span class="input-group-btn">
                  <button class="btn btn-default" type="button">
                    <span class="glyphicon glyphicon-search"></span>
                  </button>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <button
        class="btn btn-outline-primary"
        style="width: 150px; align-items: end"
        (click)="printPage()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-printer"
          viewBox="0 0 16 16"
        >
          <path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1" />
          <path
            d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"
          />
        </svg>
        Print
      </button>
      <div class="box" id="appointment">
        <h5 class="text-primary">Appointments</h5>
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Full Name</th>
              <th>Outlet</th>
              <th>Date</th>
              <th>Time</th>
              <th>Purpose</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody *ngFor="let appointment of _scheduledAppointments">
            <tr>
              <td>{{ appointment.fullname }}</td>
              <td>{{ appointment.outlet }}</td>
              <td>{{ appointment.date }}</td>
              <td>{{ appointment.time }}</td>
              <td>{{ appointment.purpose }}</td>
              <td>
                <span
                  [ngClass]="{
                    ' text-primary  ':
                      appointment.appointmentStatus === 'scheduled',
                    ' text-success ':
                      appointment.appointmentStatus === 'complete',
                    ' text-danger ':
                      appointment.appointmentStatus === 'decline',
                    'text-warning ':
                      appointment.appointmentStatus === 'cancelled'
                  }"
                >
                  {{ statusChecker(appointment.appointmentStatus) }}
                </span>
              </td>
              <td>
                <div
                  class="d-flex gap-3"
                  *ngIf="
                    appointment.appointmentStatus !== 'complete' &&
                    appointment.appointmentStatus !== 'decline' &&
                    appointment.appointmentStatus !== 'cancelled'
                  "
                >
                  <button
                    class="btn btn-danger btn-sm"
                    (click)="
                      updateStatus(
                        appointment.id,
                        appointment.email,
                        appointment.fullname,
                        'cancelled',
                        _selectedAppointment?.date +
                          ' ' +
                          _selectedAppointment?.time
                      )
                    "
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-calendar-x"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M6.146 7.146a.5.5 0 0 1 .708 0L8 8.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 9l1.147 1.146a.5.5 0 0 1-.708.708L8 9.707l-1.146 1.147a.5.5 0 0 1-.708-.708L7.293 9 6.146 7.854a.5.5 0 0 1 0-.708z"
                      />
                      <path
                        d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"
                      />
                    </svg>
                  </button>
                  <button
                    class="btn btn-success btn-sm"
                    (click)="
                      updateStatus(
                        appointment.id,
                        appointment.email,
                        appointment.fullname,
                        'cancelled',
                        _selectedAppointment?.date +
                          ' ' +
                          _selectedAppointment?.time
                      )
                    "
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-clipboard-check"
                      viewBox="0 0 16 16"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z"
                      />
                      <path
                        d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"
                      />
                      <path
                        d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"
                      />
                    </svg>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="box flex-grow-1">
    <h5 class="text-primary">New Request</h5>
    <ul
      class="list-group list-group-flush"
      *ngFor="let pending of _pendingRequest; index as index"
    >
      <li
        class="list-group-item d-flex justify-content-between align-items-center"
      >
        <div>
          <span class="text-dark"
            >New
            <span class="text-primary">{{ pending.purpose }}</span>
            request</span
          >
          <p class="text-secondary">From: {{ pending.fullname }}</p>
        </div>
        <button
          class="btn btn-success"
          data-bs-toggle="modal"
          (click)="setSelected(index)"
          data-bs-target="#staticBackdrop"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            class="bi bi-file-earmark-fill"
            viewBox="0 0 16 16"
          >
            <path
              d="M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3z"
            />
          </svg>
        </button>
      </li>
    </ul>
  </div>
</div>

<app-appointment-form
  [appointment]="_selectedAppointment"
  (onAccept)="
    updateStatus(
      _selectedAppointment?.id ?? '',
      _selectedAppointment?.email ?? '',
      _selectedAppointment?.fullname ?? '',
      'scheduled',
      _selectedAppointment?.date + ' ' + _selectedAppointment?.time
    )
  "
  (onDecline)="
    updateStatus(
      _selectedAppointment?.id ?? '',
      _selectedAppointment?.email ?? '',
      _selectedAppointment?.fullname ?? '',
      'decline',
      _selectedAppointment?.date + ' ' + _selectedAppointment?.time
    )
  "
></app-appointment-form>
